class paintBro{constructor(e){var t;let o,s;var l,r,i,n,h,a,m,y,d,g,S;let f,p,c;this.buffer=e.buffer,this.elementSizeMin=e.elementSizeMin,this.elementSizeMax=e.elementSizeMax,this.noStroke=e.noStroke,this.strokeColor=e.strokeColor,this.strokeWeight=e.strokeWeight,this.numberQuantisizer=e.numberQuantisizer,this.brushLength=e.brushLength,this.distortionFactor=e.distortionFactor,this.stepSize=e.stepSize,this.elements=[],this.area=Math.round(Math.round(this.buffer.width/DOMINANTSIDE*100)*Math.round(this.buffer.height/DOMINANTSIDE*100))/100,this.shapeNumber=Math.round(this.area*this.numberQuantisizer);for(var E=0;E<this.shapeNumber;E++){o=getRandomFromInterval(0,this.buffer.width),s=getRandomFromInterval(0,this.buffer.height),S=getRandomFromList([-this.stepSize,this.stepSize]),fxrand()<ROUGHYPUFFY?(m="special",c=getRandomFromList([color(PALETTE.aLevel.fillFirst),color(PALETTE.bLevel.fillFirst),color(PALETTE.cLevel.fillFirst)])):m=fxrand()<.6?"first":"second",d=fxrand()<BRUSHDIRECTION?"vertical":"horizontal";for(var L=0;L<this.brushLength;L++){i=!1,n=!1,h=!1,a=!1,g=getRandomFromList([-this.distortionFactor,this.distortionFactor]),"horizontal"==d?(f=o+L*S+g*L,p=s+g*L):(f=o+g*L,p=s+L*S+g*L),y="base","first"==m?(l=color(PALETTE.base.fillFirst),r=color(PALETTE.base.strokeFirst)):"special"==m?(l=c,r=color("#00000000")):(l=color(PALETTE.base.fillSecond),r=color(PALETTE.base.strokeSecond));for(var T=0;T<dotSystem.polygonsC.length;T++)t=[[dotSystem.polygonsC[T][0].x,dotSystem.polygonsC[T][0].y],[dotSystem.polygonsC[T][1].x,dotSystem.polygonsC[T][1].y],[dotSystem.polygonsC[T][2].x,dotSystem.polygonsC[T][2].y],[dotSystem.polygonsC[T][3].x,dotSystem.polygonsC[T][3].y]],pointInPolygon(t,[o,s])&&(h=!0,y="cLevel");for(h&&("first"==m?(l=color(PALETTE.cLevel.fillFirst),r=color(PALETTE.cLevel.strokeFirst)):"special"==m?(l=c,r=color(PALETTE.base.strokeFirst)):(l=color(PALETTE.cLevel.fillSecond),r=color(PALETTE.cLevel.strokeSecond))),T=0;T<dotSystem.polygonsB.length;T++)t=[[dotSystem.polygonsB[T][0].x,dotSystem.polygonsB[T][0].y],[dotSystem.polygonsB[T][1].x,dotSystem.polygonsB[T][1].y],[dotSystem.polygonsB[T][2].x,dotSystem.polygonsB[T][2].y],[dotSystem.polygonsB[T][3].x,dotSystem.polygonsB[T][3].y]],pointInPolygon(t,[o,s])&&(n=!0,y="bLevel");for(n&&("first"==m?(l=color(PALETTE.bLevel.fillFirst),r=color(PALETTE.bLevel.strokeFirst)):"special"==m?(l=c,r=color(PALETTE.base.strokeFirst)):(l=color(PALETTE.bLevel.fillSecond),r=color(PALETTE.bLevel.strokeSecond))),T=0;T<dotSystem.polygonsA.length;T++)t=[[dotSystem.polygonsA[T][0].x,dotSystem.polygonsA[T][0].y],[dotSystem.polygonsA[T][1].x,dotSystem.polygonsA[T][1].y],[dotSystem.polygonsA[T][2].x,dotSystem.polygonsA[T][2].y],[dotSystem.polygonsA[T][3].x,dotSystem.polygonsA[T][3].y]],pointInPolygon(t,[o,s])&&(i=!0,y="aLevel");i&&("first"==m?(l=color(PALETTE.aLevel.fillFirst),r=color(PALETTE.aLevel.strokeFirst)):"special"==m?(l=c,r=color(PALETTE.base.strokeFirst)):(l=color(PALETTE.aLevel.fillSecond),r=color(PALETTE.aLevel.strokeSecond))),pointInPolygon(sunny.coordsList,[f,p])&&(a=!0),a&&(l=highlightColor(l,30),r=highlightColor(r,30)),this.elements.push({elementLayer:y,elementFillColor:l,widthShape:getRandomFromInterval(this.elementSizeMin,this.elementSizeMax),heightShape:getRandomFromInterval(this.elementSizeMin,this.elementSizeMax),strokeSize:this.strokeWeight,elementStrokeColor:r,posBX:f,posBY:p,angle:getRandomFromInterval(0,2*PI)})}}}show(e){for(var t=0;t<this.elements.length;t++)this.elements[t].elementLayer==e&&(this.buffer.push(),this.buffer.fill(this.elements[t].elementFillColor),this.buffer.rectMode(CENTER),this.buffer.strokeWeight(this.strokeWeight),this.buffer.stroke(this.elements[t].elementStrokeColor),this.buffer.translate(this.elements[t].posBX,this.elements[t].posBY),this.buffer.rotate(this.elements[t].angle),this.buffer.rect(0,0,this.elements[t].widthShape,this.elements[t].heightShape),this.buffer.pop())}}